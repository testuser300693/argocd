  apiVersion: v1
  kind: ConfigMap
  metadata:
    name: <config-map-name>
  data:
    template.app-sync-status: |
      message: |
        Application {{.app.metadata.name}} has been successfully synced at {{.app.status.operationState.finishedAt}}.
        Sync operation details are available at: {{.context.argocdUrl}}/applications/{{.app.metadata.name}}?operation=true .
    template.app-deployed: |
      message: |
        Application {{.app.metadata.name}} is now running new version of deployments manifests.
    trigger.on-sync-succeeded: |
      - when: app.status.sync.status == "Succeeded"
        oncePer: app.status.sync.revision
        send: [app-sync-status]
    trigger.on-deployed: |
      - when: app.status.operationState.phase in ['Succeeded'] and app.status.health.status == 'Healthy'
        oncePer: app.status.sync.revision
        send: [app-deployed]